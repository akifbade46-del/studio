:root {
  /* 
    Hardcoded Default Light Theme. 
    This is the permanent fix for the "Flash of Unstyled Content" on mobile.
    The CSS will always have valid colors to work with from the very beginning.
  */
  --background: 0 0% 98%; /* hsl(0, 0%, 98%) - A very light grey */
  --foreground: 222.2 47.4% 11.2%; /* hsl(222.2, 47.4%, 11.2%) - Dark Blue */
  
  --card: 0 0% 100%; /* White */
  
  --primary: 222.2 47.4% 11.2%; /* Dark Blue */
  --primary-foreground: 210 40% 98%; /* Almost White */
  
  --accent: 210 40% 96.1%; /* Very Light Blue/Grey */
  
  --border: 214.3 31.8% 91.4%; /* Light Grey */
  
  --radius: 0.5rem;
  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
  --font-size-base: 16px;
}

/* --- Base Styles --- */
body {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
    font-family: var(--font-family);
    font-size: var(--font-size-base);
}

#app {
    background-color: hsl(var(--card));
    box-shadow: 0 10px 30px -15px rgba(0,0,0,0.1);
}

#preview-content {
    background-color: #ffffff !important;
    color: #111827 !important;
}

/* --- Header & Footer --- */
#app-header, #sticky-footer {
    background-color: hsla(var(--card), 0.9);
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
    border-color: hsl(var(--border));
    color: hsl(var(--foreground));
}

#app-header {
    position: sticky;
    top: 0;
    z-index: 50;
    border-bottom: 1px solid hsl(var(--border));
}

#sticky-footer {
    position: sticky;
    bottom: 0;
    z-index: 50;
    border-top: 1px solid hsl(var(--border));
}

/* --- Component Styling --- */
.bg-primary { background-color: hsl(var(--primary)) !important; }
.text-primary { color: hsl(var(--primary)) !important; }
.text-primary-foreground { color: hsl(var(--primary-foreground)) !important; }
.border-primary { border-color: hsl(var(--primary)) !important; }
.ring-primary { --tw-ring-color: hsl(var(--primary)) !important; }
.bg-dark { background-color: hsl(var(--primary)) !important; } /* Kept for login button backward compatibility */
.text-dark { color: hsl(var(--foreground)) !important; }
.bg-accent { background-color: hsl(var(--accent)) !important; }
.border-accent { border-color: hsl(var(--accent)) !important; }
.bg-card { background-color: hsl(var(--card)) !important; }

/* Muted/Gray colors */
.bg-gray-50 { background-color: hsl(var(--accent)) !important; }
.bg-gray-100 { background: hsl(var(--background)); }
.bg-gray-200 { background-color: hsl(var(--accent)) !important; filter: brightness(0.97); }
.bg-gray-300 { background-color: hsl(var(--border)) !important; filter: brightness(0.95); }
.text-gray-500 { color: hsl(var(--foreground)); opacity: 0.6; }
.text-gray-600 { color: hsl(var(--foreground)); opacity: 0.8; }

input, select, textarea, button {
    border-radius: var(--radius) !important;
    padding: 0.65rem 0.75rem !important;
    transition: all 0.2s ease-in-out !important;
    border: 1px solid hsl(var(--border)) !important;
    color: hsl(var(--foreground));
    background-color: hsl(var(--card)) !important;
}

button {
    cursor: pointer;
    font-weight: 500;
}

button:hover {
    filter: brightness(0.95);
}
button:active {
    transform: scale(0.98);
}
button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    filter: none;
}

/* Specific Button Styles */
button.bg-primary, button.bg-green-500 {
    color: hsl(var(--primary-foreground)) !important;
    border-color: transparent !important;
}

button.bg-primary:hover {
    filter: brightness(1.15);
}

/* Default button style */
button:not([class*="bg-"]):not(#clear-signature):not(.traffic-light-btn):not([data-photo-id]):not([data-delete-id]):not([data-delete-preset]):not([data-delete-container]) {
    color: hsl(var(--foreground)) !important;
    background-color: hsl(var(--card)) !important;
    border: 1px solid hsl(var(--border)) !important;
}
button:not([class*="bg-"]):hover {
     background-color: hsl(var(--accent)) !important;
     border-color: hsl(var(--border)) !important;
     filter: none;
}


input:focus, select:focus, textarea:focus {
    box-shadow: 0 0 0 2px hsl(var(--primary) / 0.5) !important;
    outline: none !important;
    border-color: hsl(var(--primary)) !important;
}


/* --- Page Transitions & Animations --- */
.step { display: none; }
.step.active {
    display: block;
    animation: fadeIn 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Tables */
#items-table th {
    font-weight: 600;
    color: hsl(var(--foreground));
}
#items-table td, #items-table th {
    border-bottom: 1px solid hsl(var(--border));
}
#items-table tbody tr:last-child td {
    border-bottom: none;
}
#items-table {
    background-color: transparent !important;
}
#items-table thead {
    background-color: hsl(var(--accent)) !important;
}

/* Modals */
#editor-modal > div, #passcode-modal > div, #load-survey-modal > div, #preview-modal > div {
    background-color: hsla(var(--card), 0.8);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid hsl(var(--border));
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    color: hsl(var(--foreground));
}

/* Modal Traffic Lights */
.traffic-light-btn {
    display: block;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    border: 1px solid rgba(0, 0, 0, 0.1);
    padding: 0 !important;
    background-color: #f0f0f0;
}
.traffic-light-btn.close { background-color: #ff5f57; }
.traffic-light-btn.minimize { background-color: #ffbd2e; }
.traffic-light-btn.maximize { background-color: #28c940; }

#close-editor-btn, #close-passcode-btn, #close-load-survey-btn, #preview-close-btn {
    cursor: pointer;
    padding: 0 !important;
    border: none !important;
    background: transparent !important;
    box-shadow: none !important;
}

/* Login Screen */
#login-screen {
    background-color: hsl(var(--background));
}

/* Print Styles */
@media print {
  body { -webkit-print-color-adjust: exact; print-color-adjust: exact; background: #fff !important; font-size: 14px; }
  .no-print { display: none !important; }
  #app-header, #sticky-footer {
      background: #fff !important;
      backdrop-filter: none !important;
      box-shadow: none !important;
      border-color: #e5e7eb !important;
  }
}
